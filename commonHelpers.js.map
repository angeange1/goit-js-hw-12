{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\"\nimport { showLoader, hideLoader } from \"../main\"\nimport {inputValue, pageToShow} from \"../main\"\n\nexport async function getImages() {\n  showLoader()\n  \n  const params = {\n    key: \"43138394-89c4115d2b9d73778d19dc685\",\n    q: inputValue,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    lang: \"en\",\n    page: pageToShow,\n    per_page: 15\n  }\n\n  const BASE_URL = \"https://pixabay.com\"\n  const END_POINT = \"/api/\"\n  const url = BASE_URL + END_POINT\n  \n  const response = await axios.get(url, {params})\n  hideLoader()\n  return response.data\n}","import iziToast from 'izitoast'\nimport 'izitoast/dist/css/iziToast.min.css'\nimport SimpleLightbox from 'simplelightbox'\nimport 'simplelightbox/dist/simple-lightbox.min.css'\n\nimport {gallery} from \"../main\"\n\nexport function renderImages(array) {\n  \n  if (!array.length) {\n    iziToast.error({\n      message: `❌ Sorry, there are no images matching your search query. Please try again!`\n    })\n  }\n\n  const markup = array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `<li class=\"image-item\">\n      <a href=\"${largeImageURL}\">\n        <img\n          src=\"${webformatURL}\"\n          data-source=\"${largeImageURL}\"\n          alt=\"${tags}\"\n        />\n        <ul class=\"image-description\">\n          <li>\n            <h3>Likes</h3>\n            <p><b>${likes}</b></p>\n          </li>\n          <li>\n            <h3>Views</h3>\n            <p><b>${views}</b></p>\n          </li>\n          <li>\n            <h3>Comments</h3>\n            <p><b>${comments}</b></p>\n          </li>\n          <li>\n            <h3>Downloads</h3>\n            <p><b>${downloads}</b></p>\n          </li>\n        </ul>\n      </a>\n    </li>`\n  })\n    .join(\"\")\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup)\n\n  const lightbox = new SimpleLightbox('.gallery a', {captionsData: 'alt', captionDelay: 250,})\n  lightbox.refresh()\n}","import axios from \"axios\"\nimport iziToast from 'izitoast'\nimport 'izitoast/dist/css/iziToast.min.css'\nimport SimpleLightbox from 'simplelightbox'\nimport 'simplelightbox/dist/simple-lightbox.min.css'\n\nimport { getImages } from \"./js/pixabay-api\"\nimport { renderImages } from \"./js/render-functions\"\n\nexport const gallery = document.querySelector(\"ul\")\nexport let inputValue\n\nexport const showLoader = () => {loader.style.display = \"flex\"}\nexport const hideLoader = () => {loader.style.display = \"none\"}\n\nconst form = document.querySelector(\"form\")\nconst searchInput = document.querySelector(\"input\")\nconst loader = document.querySelector(\".loader\")\nconst loadMoreBtn = document.querySelector(\".loadmore-btn\")\nconst loadMoreLoader = document.querySelector(\".loading-more\")\n\nexport let pageToShow = 1\nexport let perPage = 15 \nexport let endPage\n\nloader.style.display = \"none\"\n\nform.addEventListener(\"submit\", handleSearchSubmit)\n\nasync function handleSearchSubmit(event){\n  event.preventDefault()\n  hideLoadMore()\n  pageToShow = 1\n  inputValue = searchInput.value.trim()\n  gallery.innerHTML = \"\"\n\n  if (inputValue !== \"\") {\n    try {\n      const images = await getImages(inputValue, pageToShow)\n      endPage = Math.ceil(images.totalHits / perPage)\n      renderImages(images.hits)\n      isLoadMoreToShow()\n      form.reset()\n    } catch (error) {console.log(error)}\n  }\n  else {\n    gallery.innerHTML = \"\"\n    iziToast.info({\n      message: \"Please fill the field\",\n    })\n  }\n}\n\nloadMoreBtn.addEventListener('click', handleLoadMoreClick)\n\nasync function handleLoadMoreClick() {\n  try {\n    pageToShow += 1\n    showLoadMoreLoader()\n    const images = await getImages(inputValue, pageToShow) \n    hideLoadMoreLoader()\n    renderImages(images.hits)\n\n    }catch (error) {\n        console.log(error)\n    }\n    scrollImages()\n    isLoadMoreToShow()\n}\n\nfunction isLoadMoreToShow() {\n  if (pageToShow > endPage) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results\"\n    })\n    hideLoadMore() \n  }\n  else {showLoadMore()}\n}\n\nfunction showLoadMore() {\nloadMoreBtn.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMore() {\nloadMoreBtn.classList.add(\"hidden\")\n}\n\nfunction showLoadMoreLoader() {\nloadMoreLoader.classList.remove('hidden')\n}\n\nfunction hideLoadMoreLoader() {\nloadMoreLoader.classList.add('hidden')\n}\n\nfunction scrollImages(){\n    const galleryItem = document.querySelector('.image-item')\n    const height = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height*2,\n        behavior: 'smooth',\n      });\n}\n\n\n// Реєстрація Помилок у Консолі: Замість того, щоб просто виводити помилки у консоль, \n// було б інформативніше для користувача відображати ці помилки за допомогою бібліотеки повідомлень,\n//   наприклад, iziToast, яка вже інтегрована у ваш проект."],"names":["getImages","showLoader","params","inputValue","pageToShow","url","response","axios","hideLoader","renderImages","array","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","SimpleLightbox","loader","form","searchInput","loadMoreBtn","loadMoreLoader","perPage","endPage","handleSearchSubmit","event","hideLoadMore","images","isLoadMoreToShow","error","handleLoadMoreClick","showLoadMoreLoader","hideLoadMoreLoader","scrollImages","showLoadMore","height"],"mappings":"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"}